(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,a){e.exports=a.p+"static/media/plus.ed0ca2af.svg"},40:function(e,t,a){e.exports=a.p+"static/media/plus_white.ecd07d99.svg"},41:function(e,t,a){e.exports=a(70)},46:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),c=a.n(s),o=(a(46),a(16)),l=a(18),i=a(2),u=a(3),p=a(5),m=a(4),d=a(6),h=a(11),_=a(9),f=a(1),g=a.n(f),v=a(7),b=a(8),E=a.n(b),k=a(36),j={common:{"X-CSRF-TOKEN":a.n(k).a.get("csrftoken")}},w=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(atob(t[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}},{key:"isOwner",value:function(e){try{var t=this.getPayload();return console.log(t,e),t.sub===e}catch(a){console.log(a)}}}]),e}(),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={focus:{email:null,password:null},data:{password:"",email:""},error:""},a.handleSumbit=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.a.post("/api/login/",a.state.data,j);case 4:n=e.sent,console.log(j),w.setToken(n.data.token),a.props.history.push("/project-board/user"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a.setState({error:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),a.handleInputFocus=function(e){var t={email:null,password:null};t[e.target.name]=!0,a.setState({focus:t,error:""})},a.handleInputBlur=function(e){var t={email:null,password:null};t[e.target.name]=null,a.setState({focus:t,error:""})},a.handleChange=function(e){var t=Object(_.a)({},a.state.data,Object(h.a)({},e.target.name,e.target.value));a.setState({data:t,error:""})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.focus,a=e.data;return r.a.createElement("form",{onSubmit:this.handleSumbit},r.a.createElement("div",{className:"login_wrapper"},r.a.createElement("div",null,r.a.createElement("label",{className:"input_label ".concat(t.email||a.email?" ":"input_label_on_focus")},"Email ",r.a.createElement("span",{className:"error_text error_text_logreg"},this.state.error)),r.a.createElement("div",null,r.a.createElement("input",{name:"email",type:"email",className:"input",onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("label",{className:"input_label ".concat(t.password||a.password?" ":"input_label_on_focus")},"Password ",r.a.createElement("span",{className:"error_text error_text_logreg"},this.state.error)),r.a.createElement("div",null,r.a.createElement("input",{name:"password",type:"password",className:"input",onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("button",{className:"button",type:"submit"},"Submit"))))}}]),t}(r.a.Component),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={focus:{username:null,email:null,password:null,password_confirmation:null},data:{username:"",email:"",password:"",password_confirmation:""},errors:{username:"",email:"",password:"",password_confirmation:""}},a.handleSumbit=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.a.post("/api/register/",a.state.data,j);case 4:a.props.handleRegisterChange(),e.next=12;break;case 7:for(r in e.prev=7,e.t0=e.catch(1),n=Object(_.a)({},e.t0.response.data))console.log(typeof n[r]),typeof n[r]!==String&&(n[r]=n[r][0]),console.log(n),n[r].includes("blank")?n[r]="required":n[r].includes("exist")&&(n[r]="".concat(r," already exists"));a.setState({errors:n});case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleInputFocus=function(e){var t={email:null,password:null,username:null,password_confirmation:null};t[e.target.name]=!0,a.setState({focus:t,errors:{email:"",password:"",username:"",password_confirmation:""}})},a.handleInputBlur=function(e){var t={email:null,password:null,username:null,password_confirmation:null};t[e.target.name]=null,a.setState({focus:t,errors:{email:"",password:"",username:"",password_confirmation:""}})},a.handleChange=function(e){var t=Object(_.a)({},a.state.data,Object(h.a)({},e.target.name,e.target.value));a.setState({data:t,errors:{email:"",password:"",username:"",password_confirmation:""}})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.focus,a=e.data;return r.a.createElement("form",{onSubmit:this.handleSumbit},r.a.createElement("div",{className:"login_wrapper"},r.a.createElement("div",null,r.a.createElement("label",{className:"input_label ".concat(t.username||a.username?" ":"input_label_on_focus")},"Username ",this.state.errors.username&&r.a.createElement("span",{className:"error_text error_text_logreg"}," ",this.state.errors.username)),r.a.createElement("div",null,r.a.createElement("input",{name:"username",type:"username",className:"input",onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("label",{className:"input_label ".concat(t.email||a.email?" ":"input_label_on_focus")},"Email ",this.state.errors.email&&r.a.createElement("span",{className:"error_text error_text_logreg"}," ",this.state.errors.email)),r.a.createElement("div",null,r.a.createElement("input",{name:"email",type:"email",className:"input",onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("label",{className:"input_label ".concat(t.password||a.password?" ":"input_label_on_focus")},"Password ",this.state.errors.password&&r.a.createElement("span",{className:"error_text error_text_logreg"},this.state.errors.password)),r.a.createElement("div",null,r.a.createElement("input",{name:"password",type:"password",className:"input",onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("label",{className:"input_label ".concat(t.password_confirmation||a.password_confirmation?" ":"input_label_on_focus")},"Password Confirmation ",this.state.errors.password_confirmation&&r.a.createElement("span",{className:"error_text error_text_logreg"}," ",this.state.errors.password_confirmation)),r.a.createElement("div",null,r.a.createElement("input",{name:"password_confirmation",type:"password",className:"input",onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange}))),r.a.createElement("div",null,r.a.createElement("button",{className:"button",type:"submit"},"Submit"))))}}]),t}(r.a.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={register:!1},a.handleRegisterChange=function(){a.setState({register:!a.state.register})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("main",{className:"landing_main"},r.a.createElement("div",{className:"landing_banner"},r.a.createElement("div",{className:"auth_outer_wrapper"},r.a.createElement("div",{className:"auth_wrapper ".concat(this.state.register&&"auth_wrapper_register")},r.a.createElement("h2",null,this.state.register?"Register":"Login"),this.state.register?r.a.createElement(N,{handleRegisterChange:this.handleRegisterChange}):r.a.createElement(y,this.props)),r.a.createElement("div",{className:"login_register_switch",onClick:this.handleRegisterChange},r.a.createElement("span",{className:"login_register_small"},"go to "),this.state.register?"Login":"Register"))))}}]),t}(r.a.Component),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleUserPage=function(){a.props.history.push("/project-board/user")},a.handleLogout=function(){w.logout(),a.props.history.push("/")},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar_left"},r.a.createElement("div",{className:"website_icon",onClick:this.handleUserPage}),r.a.createElement("div",{onClick:this.props.burgerSwitch,className:"burger_menu"},r.a.createElement("div",{className:"burger_menu_line"}),r.a.createElement("div",{className:"burger_menu_line"}),r.a.createElement("div",{className:"burger_menu_line"}))),r.a.createElement("div",{className:"navbar_user_options"},r.a.createElement("button",{onClick:this.handleLogout,className:"logout_button"},r.a.createElement("div",{className:"logout_icon"}),r.a.createElement("span",{className:"logout_text"},"Logout")),r.a.createElement("div",{className:"nav_user_image",style:{backgroundImage:"url(".concat(this.props.image)},onClick:this.handleUserPage})))}}]),t}(r.a.Component),x=Object(l.g)(O),S=a(39),U=a.n(S),P=a(40),T=a.n(P),D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selected:null},a.handleNewProject=function(){a.props.history.push("/project-board/new"),a.setState({selected:"new"})},a.checkCorrectTagSelected=function(){var e=a.props.history.location.pathname.replace("/project-board/","");a.state.selected!==e&&a.setState({selected:e})},a.componentDidUpdate=function(){a.checkCorrectTagSelected()},a.handleProjectRedirect=function(e){a.props.history.push("/project-board/".concat(e.target.getAttribute("name"))),a.setState({selected:e.target.getAttribute("name")})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"sidebar"},r.a.createElement("div",{className:"project_tag_container"},r.a.createElement("div",{className:"project_tag ".concat("new"===this.state.selected?"selected_tag":"unselected_tag"),onClick:this.handleNewProject},r.a.createElement("img",{className:"plus",src:"new"===this.state.selected?U.a:T.a,alt:"New Project"})),this.props.projects.map((function(t){return r.a.createElement("div",{className:"project_tag ".concat(parseInt(e.state.selected)===t.id?"selected_tag":"unselected_tag"),key:t.id,name:t.id,onClick:e.handleProjectRedirect},t.name)}))))}}]),t}(r.a.Component),A=Object(l.g)(D),B=a(21),F=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_done","data-type":"status","data-value":"done"},"Done"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_progress","data-type":"status","data-value":"in progress"},"In Progress"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_stuck","data-type":"status","data-value":"stuck"},"Stuck"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_blank","data-type":"status","data-value":""}))}}]),t}(r.a.Component),I=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal",onClick:this.props.handleModal}),r.a.createElement("div",{className:"modal_content_wrapper"},r.a.createElement("div",{className:"modal_content"},r.a.createElement("h2",{className:"modal_header"},"Users"),r.a.createElement("input",{className:"input modal_input",placeholder:"Enter Name",onChange:this.props.handleSearchChange,value:this.props.userSearch}),r.a.createElement("div",null,this.props.users&&this.props.users.filter((function(t){return t.username.toLowerCase().includes(e.props.userSearch.toLowerCase())||t.email.toLowerCase().includes(e.props.userSearch.toLowerCase())})).map((function(t){return r.a.createElement("div",{key:t.id,onClick:function(){return e.props.selectUser(t)},className:"user_search_container"},r.a.createElement("div",{className:"user_search_image",style:{backgroundImage:"url(".concat(t.image,")")}}),r.a.createElement("div",{className:"user_search_header"},r.a.createElement("h3",null,t.username),r.a.createElement("p",null,t.email)),e.props.usersSelected.map((function(e){return e.id})).includes(t.id)&&r.a.createElement("div",{className:"user_search_controls"},r.a.createElement("div",{className:"user_selected_icon"})))}))))))}}]),t}(r.a.Component),M=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("input",{"data-type":"numbers",type:"number",autoFocus:!0,className:"input",onBlur:function(t){return e.props.handleSetColumn(t)},onKeyPress:function(t){if("Enter"===t.key)return e.props.handleSetColumn(t)}}))}}]),t}(r.a.Component),z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],newComment:""},a.getComments=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/projects/".concat(a.props.project.id,"/comments/"),{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 3:t=e.sent,(n=t.data).sort((function(e,t){return e.id-t.id})),console.log(n),a.setState({comments:n,newComment:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.sendComment=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(a.props.project),n={text:t.target.value},e.prev=3,""===t.target.value){e.next=8;break}return e.next=7,E.a.post("/api/projects/".concat(a.props.project.id,"/comments/"),n,{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 7:a.getComments();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState({newComment:e.target.value})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getComments();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.project;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal",onClick:this.props.toggleChatModal}),r.a.createElement("section",{className:"modal_content_wrapper project_chat_outer_wrapper"},r.a.createElement("div",{className:"project_chat_wrapper"},r.a.createElement("h2",{className:"project_chat_header"},t.name),r.a.createElement("div",{className:"project_line_break"}),r.a.createElement("div",null,r.a.createElement("div",null,this.state.comments.map((function(e){return r.a.createElement("div",{key:e.id,className:"comment_wrapper ".concat(!w.isOwner(e.user.id)&&"comment_not_owned")},r.a.createElement("div",{className:"user_comment_image user_search_image",style:{backgroundImage:"url('".concat(e.user.image,"')")}}),r.a.createElement("div",{className:"comment_text_field ".concat(w.isOwner(e.user.id)&&"comment_owned")},r.a.createElement("h4",null,w.isOwner(e.user.id)?"Me":e.user.username),r.a.createElement("div",{className:"chat_line_break"}),r.a.createElement("p",null,e.text)))}))),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.sendComment},r.a.createElement("div",{className:"new_comment_wrapper"},r.a.createElement("div",{className:"user_comment_image user_search_image",style:{backgroundImage:"url(".concat(this.props.user.image,")")}}),r.a.createElement("textarea",{onKeyPress:function(t){if("Enter"===t.key)return e.sendComment(t)},onBlur:this.sendComment,onChange:this.handleChange,value:this.state.newComment,className:"new_comment_text_field"}))))))))}}]),t}(r.a.Component),R=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_urgent","data-type":"priority","data-value":"urgent"},"Urgent"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_high","data-type":"priority","data-value":"high"},"High"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_medium","data-type":"priority","data-value":"medium"},"Medium"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_low","data-type":"priority","data-value":"low"},"Low"),r.a.createElement("div",{onClick:function(t){return e.props.handleSetColumn(t)},className:"picker_option picker_blank","data-type":"priority","data-value":""}))}}]),t}(r.a.Component),L=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userSearch:"",filteredUsers:[]},a.handleChange=function(e){var t=JSON.parse(JSON.stringify(a.props.users)).filter((function(t){return t.username.toLowerCase().includes(e.target.value.toLowerCase())}));a.setState({filteredUsers:t})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({users:this.props.users,filteredUsers:this.props.users})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"picker user_picker_wrapper"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("input",{className:"input",placeholder:"Name",onChange:this.handleChange}),this.state.filteredUsers.map((function(t){return r.a.createElement("div",{key:t.id,"data-type":"users","data-value":t.id,className:"user_column_choices_wrapper",onClick:function(t){return e.props.handleSetUserColumn(t)}},r.a.createElement("div",{className:"user_column_image",style:{backgroundImage:"url('".concat(t.image,"')")}}),r.a.createElement("h4",null,t.username))})))}}]),t}(r.a.Component),K=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("input",{"data-type":"text",autoFocus:!0,className:"input",maxLength:"10",onBlur:function(t){return e.props.handleSetColumn(t)},onKeyPress:function(t){if("Enter"===t.key)return e.props.handleSetColumn(t)}}))}}]),t}(r.a.Component),q=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("input",{"data-type":"date",type:"date",id:"date_input",className:"input date_input",autoFocus:!0,onBlur:function(t){return e.props.handleSetColumn(t)},onChange:function(t){return e.props.handleSetColumn(t)},onKeyPress:function(t){if("Enter"===t.key)return e.props.handleSetColumn(t)}}))}}]),t}(r.a.Component),G=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.column;return r.a.createElement("div",{className:"picker"},r.a.createElement("div",{className:"popup_close",onClick:this.props.closePopUp}),r.a.createElement("input",{"data-type":"file",className:"input",type:"file",autoFocus:!0,onChange:this.props.handleFileUpload}),e.file&&r.a.createElement("a",{className:"column_file_link",rel:"noopener noreferrer",target:"_blank",href:e.file},r.a.createElement("div",{className:"column_file_icon pointer_events_none column_file_".concat(e[e.col_type].split(".").pop())})))}}]),t}(r.a.Component),J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={project:null,popup:{open:!1,type:null,location:{top:null,left:null}},column:null,newTask:!1,newTaskText:"",editTask:null,editTaskText:"",edit:{name:!1,description:!1,newName:"",newDescription:""},newColumnOpen:!1,modal:{open:!1,type:null},chatModal:!1,users:[],userSearch:"",usersSelected:[]},a.getProjectData=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/projects/".concat(a.props.match.params.id),{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 3:t=e.sent,(n=t.data).tasks.forEach((function(e){e.columns.sort((function(e,t){return e.col_id-t.col_id}))})),n.tasks.sort((function(e,t){return e.id-t.id})),console.log(n),a.setState({project:n,newTask:!1,edit:Object(_.a)({},a.state.edit,{newName:n.name,newDescription:n.description}),editTask:null,editTaskText:""}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(a.props.history.push("/project-board/notfound"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),a.handlePopup=function(e,t){var n=e.target.getBoundingClientRect(),r=document.querySelectorAll(".navbar")[0].offsetHeight,s=document.querySelectorAll(".sidebar")[0].offsetWidth,c=document.querySelectorAll(".project_main")[0].scrollTop,o=n.top+n.height-r+c,l=n.left-s,i=Object(_.a)({},a.state.popup,{open:!a.state.popup.open,type:t.col_type,location:Object(_.a)({},a.state.popup.location,{top:o,left:l})});a.setState({popup:i,column:t,newColumnOpen:!1})},a.handleSetColumn=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.getAttribute("data-type"),r=t.target.getAttribute("data-value")?t.target.getAttribute("data-value"):"string"===typeof t.target.value?t.target.value:"number"===typeof t.target.value?parseFloat(t.target.value):"",a.closePopUp(),e.prev=3,e.next=6,E.a.put("/api/projects/".concat(a.state.project.id,"/columns/").concat(a.state.column.col_id,"/").concat(a.state.column.id,"/"),Object(h.a)({},n,r),{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 6:a.getProjectData(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),a.handleFileUpload=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.closePopUp(),console.log(t.target.files),(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","yjf5g5uc"),e.prev=5,e.next=8,E.a.post("https://api.cloudinary.com/v1_1/".concat("dzctontbo","/raw/upload"),n);case 8:return r=e.sent,e.next=11,E.a.put("/api/projects/".concat(a.state.project.id,"/columns/").concat(a.state.column.col_id,"/").concat(a.state.column.id,"/"),{file:r.data.url},{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 11:a.getProjectData(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0.response);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),a.handleSetUserColumn=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.closePopUp(),n=t.target.getAttribute("data-value"),e.prev=2,e.next=5,E.a.put("/api/projects/".concat(a.state.project.id,"/columns/").concat(a.state.column.col_id,"/").concat(a.state.column.id,"/"),{users:[n]},{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 5:a.getProjectData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a.taskDelete=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.delete("/api/projects/".concat(a.state.project.id,"/tasks/").concat(t,"/"),{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 3:a.closePopUp(),a.getProjectData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.columnDelete=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,E.a.delete("/api/projects/".concat(a.state.project.id,"/columns/").concat(t,"/"),{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 4:a.closePopUp(),a.getProjectData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteProject=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.delete("/api/projects/".concat(a.state.project.id),{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 3:a.props.getUserData(),a.props.history.push("/project-board/user"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.toggleChatModal=function(){console.log("chat modal"),a.setState({chatModal:!a.state.chatModal})},a.userColumnChangeRequest=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("/api/projects/".concat(a.state.project.id,"/columns/").concat(t.col_id,"/").concat(t.id,"/"),{users:[]},{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),a.handleModal=Object(v.a)(g.a.mark((function e(){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.modal.open){e.next=15;break}return t={name:a.state.project.name,owner:a.state.project.owner,description:a.state.project.description,users:a.state.usersSelected.map((function(e){return e.id}))},e.prev=2,e.next=5,E.a.put("/api/projects/".concat(a.state.project.id,"/"),t,{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 5:n=e.sent,a.state.project.tasks.map((function(e){return e.columns})).flat().filter((function(e){return"users"===e.col_type})).forEach((function(e){n.data.users.includes(e.users[0])||a.userColumnChangeRequest(e)})),a.getProjectData(),a.getUserData(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:r=Object(_.a)({},a.state.modal,{open:!a.state.modal.open}),a.setState({modal:r});case 17:case"end":return e.stop()}}),e,null,[[2,12]])}))),a.newRowTextField=function(){a.setState({newTask:!0})},a.newRow=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.value){e.next=2;break}return e.abrupt("return",a.setState({newTask:!1}));case 2:return e.prev=2,e.next=5,E.a.post("/api/projects/".concat(a.state.project.id,"/tasks/"),{text:t.target.value},{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 5:a.getProjectData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a.newColumnOpen=function(){a.closePopUp(),a.setState({newColumnOpen:!a.state.newColumnOpen})},a.newColumn=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.getAttribute("name"),e.prev=1,e.next=4,E.a.post("/api/projects/".concat(a.state.project.id,"/columns/"),{col_type:n},{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 4:a.getProjectData(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:a.newColumnOpen();case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=Object(_.a)({},a.state.edit,Object(h.a)({},e.target.name,e.target.value));a.setState({edit:t})},a.handleTaskChange=function(e){a.setState({editTaskText:e.target.value})},a.setEdit=function(e){var t=Object(_.a)({},a.state.edit,Object(h.a)({},e.target.getAttribute("name"),!0));a.setState({edit:t})},a.sendEdit=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:a.state.edit.newName,owner:a.state.project.owner,description:a.state.edit.newDescription},e.prev=2,e.next=5,E.a.put("/api/projects/".concat(a.state.project.id,"/"),n,{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:r=Object(_.a)({},a.state.edit,{name:!1,description:!1}),a.getProjectData(),a.props.getUserData(),a.setState({edit:r});case 14:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),a.editTaskText=function(e,t){a.setState({editTask:e,editTaskText:t})},a.sendTaskEdit=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("/api/projects/".concat(a.state.project.id,"/tasks/").concat(t,"/"),{text:a.state.editTaskText},{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 3:a.getProjectData(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),a.closePopUp=function(){var e=Object(_.a)({},a.state.popup,{open:!1,location:Object(_.a)({},a.state.popup.location)});a.setState({popup:e})},a.handleGetUsers=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/users",{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 2:t=e.sent,n=(n=t.data).filter((function(e){return e.id!==a.state.project.owner})),a.setState({users:n,usersSelected:a.state.project.users});case 6:case"end":return e.stop()}}),e)}))),a.handleSearchChange=function(e){a.setState({userSearch:e.target.value})},a.selectUser=function(e){var t=Object(B.a)(a.state.usersSelected);t.map((function(e){return e.id})).includes(e.id)?t=t.filter((function(t){return t.id!==e.id})):t.push(e),a.setState({usersSelected:t})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getProjectData().then((function(){return t.handleGetUsers()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.location.pathname!==t.location.pathname&&this.getProjectData().then((function(){return a.handleGetUsers()}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!this.state.project)return null;var t=this.state,a=t.project,n=t.popup;return r.a.createElement("section",{className:"project_main"},n.open&&r.a.createElement("div",{className:"popup_wrapper"},r.a.createElement("div",{className:"column_popup",style:{top:"".concat(n.location.top,"px"),left:"".concat(n.location.left,"px")}},"status"===n.type&&r.a.createElement(F,{closePopUp:this.closePopUp,handleSetColumn:this.handleSetColumn}),"numbers"===n.type&&r.a.createElement(M,{closePopUp:this.closePopUp,handleSetColumn:this.handleSetColumn}),"priority"===n.type&&r.a.createElement(R,{closePopUp:this.closePopUp,handleSetColumn:this.handleSetColumn}),"users"===n.type&&r.a.createElement(L,{closePopUp:this.closePopUp,handleSetUserColumn:this.handleSetUserColumn,users:a.users}),"text"===n.type&&r.a.createElement(K,{closePopUp:this.closePopUp,handleSetColumn:this.handleSetColumn}),"date"===n.type&&r.a.createElement(q,{closePopUp:this.closePopUp,handleSetColumn:this.handleSetColumn}),"file"===n.type&&r.a.createElement(G,{closePopUp:this.closePopUp,handleFileUpload:this.handleFileUpload,column:this.state.column}))),r.a.createElement("div",{className:"project_container"},r.a.createElement("div",{className:"project_header"},r.a.createElement("div",{className:"project_info_text"},this.state.edit.name?r.a.createElement("form",{onSubmit:this.sendEdit},r.a.createElement("input",{className:"input project_header_edit",name:"newName",onChange:this.handleChange,autoFocus:!0,onBlur:this.sendEdit,value:this.state.edit.newName})):r.a.createElement("h1",{className:"project_name project_header_edit_click",name:"name",onClick:this.setEdit},a.name,r.a.createElement("span",{className:"edit_project_name_icon"})),this.state.edit.description?r.a.createElement("textarea",{className:"project_description project_edit_description",name:"newDescription",onChange:this.handleChange,autoFocus:!0,onBlur:this.sendEdit,onKeyPress:function(t){if("Enter"===t.key)return e.sendEdit(t)},value:this.state.edit.newDescription}):r.a.createElement("p",{className:"project_description project_header_edit_click",name:"description",onClick:this.setEdit},a.description,r.a.createElement("span",{className:"edit_project_description_icon"}))),r.a.createElement("div",{onClick:this.handleModal,className:"project_users"},r.a.createElement("h3",{className:"project_users_title "},"Users"),r.a.createElement("div",{className:"project_user_show"},this.state.usersSelected.map((function(e){return r.a.createElement("div",{key:e.id,className:"new_project_user_display_image",style:{backgroundImage:"url(".concat(e.image)}})}))))),r.a.createElement("div",{className:"project_line_break"}),r.a.createElement("div",{className:"table_container_outer"},r.a.createElement("div",{className:"table_container"},r.a.createElement("div",{className:"task_container col_header_container"},r.a.createElement("div",{className:"task_colour col_header_invis",style:{background:"#6ECAB5"}}),r.a.createElement("div",{className:"task_content_container"},r.a.createElement("p",{className:"task_text col_header_invis"},r.a.createElement("span",{onClick:this.toggleChatModal,className:"project_chat_icon"}),r.a.createElement("span",{onClick:this.deleteProject,className:"project_delete_icon"})),a.tasks[0]&&a.tasks[0].columns.map((function(t){return r.a.createElement("div",{key:t.id,className:"task_column_outer_no_hover"},r.a.createElement("div",{className:"task_column"},t.col_type),r.a.createElement("div",{className:"column_delete",onClick:function(){return e.columnDelete(t.col_id)}}))})))),a.tasks.map((function(t){return r.a.createElement("div",{key:t.id,className:"task_container"},r.a.createElement("div",{className:"task_colour",style:{background:"#6ECAB5"}}),r.a.createElement("div",{className:"task_content_container"},t.id===e.state.editTask?r.a.createElement("input",{className:"task_text new_task_input",style:{fontSize:"1em"},onBlur:function(){return e.sendTaskEdit(t.id)},onKeyPress:function(a){if("Enter"===a.key)return e.sendTaskEdit(t.id)},autoFocus:!0,onChange:e.handleTaskChange,value:e.state.editTaskText}):r.a.createElement("p",{onClick:function(){return e.editTaskText(t.id,t.text)},className:"task_text"},t.text,r.a.createElement("span",{onClick:function(){return e.taskDelete(t.id)},className:"task_delete"})),t.columns.map((function(t){return r.a.createElement("div",{key:t.id,className:"task_column_outer task_column_".concat(t.col_type," task_column_").concat(t[t.col_type]),onClick:function(a){return e.handlePopup(a,t)}},r.a.createElement("div",{className:"task_column"},"users"===t.col_type&&r.a.createElement("div",{className:"user_column_image user_column_padding",style:{backgroundImage:"url('".concat(t.users[0]&&a.users.find((function(e){return e.id===t.users[0]})).image,"')")}}),"numbers"===t.col_type&&t[t.col_type],"text"===t.col_type&&t[t.col_type],"priority"===t.col_type&&t[t.col_type],"status"===t.col_type&&t[t.col_type],"date"===t.col_type&&t[t.col_type],"file"===t.col_type&&t[t.col_type]&&r.a.createElement("div",{className:"column_file_icon pointer_events_none column_file_".concat(t[t.col_type].split(".").pop())})))}))))})),r.a.createElement("div",{className:"task_container new_task_container",onClick:this.newRowTextField},r.a.createElement("div",{className:"task_colour",style:{background:"#6ECAB5"}}),r.a.createElement("div",{className:"task_content_container"},this.state.newTask?r.a.createElement("input",{className:"task_text new_task_input",style:{fontSize:"1em"},onBlur:this.newRow,onKeyPress:function(t){if("Enter"===t.key)return e.newRow(t)},autoFocus:!0}):r.a.createElement("p",{className:"task_text"},"+ Task")))),r.a.createElement("div",{className:"new_column"},r.a.createElement("div",{onClick:this.newColumnOpen,className:"new_column_inner"},"+")),this.state.newColumnOpen&&r.a.createElement("div",{className:"new_column_popup_test"},r.a.createElement("div",{className:"popup_close new_column_close",onClick:this.newColumnOpen}),r.a.createElement("div",{className:"new_column_popup_inner"},r.a.createElement("div",{name:"status",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"Status")),r.a.createElement("div",{name:"numbers",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"Numbers")),r.a.createElement("div",{name:"priority",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"Priority")),r.a.createElement("div",{name:"users",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"Users")),r.a.createElement("div",{name:"text",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"Text")),r.a.createElement("div",{name:"date",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"Date")),r.a.createElement("div",{name:"file",onClick:this.newColumn,className:"new_column_item"},r.a.createElement("h2",{className:"new_column_item_text"},"File")))))),this.state.modal.open&&r.a.createElement(I,{handleModal:this.handleModal,handleSearchChange:this.handleSearchChange,userSearch:this.state.userSearch,users:this.state.users,selectUser:this.selectUser,usersSelected:this.state.usersSelected}),this.state.chatModal&&r.a.createElement(z,{toggleChatModal:this.toggleChatModal,project:this.state.project,user:this.props.user}))}}]),t}(r.a.Component),H=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:{name:"",description:""},modal:!1,users:null,userSearch:"",usersSelected:[],fieldError:!1},a.handleChange=function(e){var t=Object(_.a)({},a.state.data,Object(h.a)({},e.target.name,e.target.value));a.setState({data:t,fieldError:!1})},a.handleModal=function(e){e.stopPropagation(),e.preventDefault(),a.handleGetUsers(),a.setState({modal:!a.state.modal})},a.handleGetUsers=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/users",{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 2:t=e.sent,n=(n=t.data).filter((function(e){return e.id!==a.props.userId})),a.setState({users:n});case 6:case"end":return e.stop()}}),e)}))),a.handleSearchChange=function(e){a.setState({userSearch:e.target.value})},a.selectUser=function(e){var t=Object(B.a)(a.state.usersSelected);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a.setState({usersSelected:t})},a.handleSubmit=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Object(_.a)({},a.state.data,{users:a.state.usersSelected.map((function(e){return e.id}))}),console.log(n),e.prev=3,e.next=6,E.a.post("/api/projects/",n,{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 6:r=e.sent,a.props.getUserData(),a.props.history.push("/project-board/".concat(r.data.id)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),e.t0.response.data.name&&a.setState({fieldError:!0}),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"project_main"},r.a.createElement("div",{className:"new_project_wrapper"},r.a.createElement("form",{className:"new_project_form",onSubmit:this.handleSubmit},r.a.createElement("h1",{className:"new_project_header"},"New Project"),r.a.createElement("div",{className:"new_project_content"},r.a.createElement("div",{className:"new_project_input_wrapper"},r.a.createElement("label",{className:"new_project_input_label"},"Project Name"),r.a.createElement("div",null,r.a.createElement("input",{name:"name",className:"input new_project_input",onChange:this.handleChange}),this.state.fieldError&&r.a.createElement("span",{className:"error_text"},"This field is required"))),r.a.createElement("div",{className:"new_project_input_wrapper"},r.a.createElement("label",{className:"new_project_input_label"},"Description"),r.a.createElement("div",null,r.a.createElement("textarea",{className:"new_project_text_field",name:"description",onChange:this.handleChange}))),r.a.createElement("div",{className:"new_project_input_wrapper new_project_user_show_wrapper"},r.a.createElement("button",{className:"new_project_build_team_button button",onClick:this.handleModal},"Build Your Team"),r.a.createElement("div",{className:"new_project_user_show"},this.state.usersSelected.map((function(e){return r.a.createElement("div",{key:e.id,className:"new_project_user_display_image",style:{backgroundImage:"url(".concat(e.image)}})}))))),r.a.createElement("button",{className:"button new_project_submit_button",type:"submit"},"Submit"))),this.state.modal&&r.a.createElement(I,{handleModal:this.handleModal,handleSearchChange:this.handleSearchChange,userSearch:this.state.userSearch,users:this.state.users,selectUser:this.selectUser,usersSelected:this.state.usersSelected}))}}]),t}(r.a.Component),W=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,username:{edit:!1,text:""},email:{edit:!1,text:""}},a.imageUpload=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.files),(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","hmrrfxib"),e.prev=4,e.next=7,E.a.post("https://api.cloudinary.com/v1_1/".concat("dzctontbo","/image/upload"),n);case 7:return r=e.sent,s=Object(_.a)({},a.state.user,{image:r.data.url}),e.next=11,E.a.put("/api/users/me/",s,{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 11:a.props.getUserData(),a.getUserData(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0.response);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),a.editUserProfile=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.getAttribute("name"),e.prev=1,r=Object(_.a)({},a.state.user,Object(h.a)({},n,a.state[n].text)),console.log(r),e.next=6,E.a.put("/api/users/me/",r,{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 6:s=e.sent,console.log(s),a.getUserData(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),a.handleTextChange=function(e){var t=e.target.getAttribute("name"),n=Object(_.a)({},a.state[t],{text:e.target.value});console.log(n),a.setState(Object(h.a)({},t,n))},a.handleChangeEditState=function(e){var t=e.target.getAttribute("name"),n=Object(_.a)({},a.state[t],{edit:!0});a.setState(Object(h.a)({},t,n))},a.getUserData=Object(v.a)(g.a.mark((function e(){var t,n,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 2:t=e.sent,n=t.data,r={edit:!1,text:n.username},s={edit:!1,text:n.email},a.setState({user:n,username:r,email:s});case 7:case"end":return e.stop()}}),e)}))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this;if(!this.state.user)return null;var t=this.state.user,a=t.tasks;return console.log(a),r.a.createElement("section",{className:"project_main"},r.a.createElement("div",{className:"user_page_wrapper"},r.a.createElement("div",{className:"user_page_header"},r.a.createElement("label",{htmlFor:"upload_image"},r.a.createElement("div",{className:"user_page_image",style:{backgroundImage:"url(".concat(t.image)}})),r.a.createElement("input",{type:"file",className:"user_page_image_input",id:"upload_image",onChange:this.imageUpload}),r.a.createElement("div",{className:"user_page_info"},this.state.username.edit?r.a.createElement("input",{autoFocus:!0,name:"username",onChange:this.handleTextChange,onBlur:this.editUserProfile,onKeyPress:function(t){if("Enter"===t.key)return e.editUserProfile(t)},className:"user_page_username_edit",value:this.state.username.text}):r.a.createElement("h1",{name:"username",onClick:this.handleChangeEditState,className:"user_page_username"},t.username,r.a.createElement("span",{className:"edit_username_icon"})),this.state.email.edit?r.a.createElement("input",{autoFocus:!0,name:"email",onChange:this.handleTextChange,onBlur:this.editUserProfile,onKeyPress:function(t){if("Enter"===t.key)return e.editUserProfile(t)},className:"user_page_email_edit",value:this.state.email.text}):r.a.createElement("h3",{name:"email",onClick:this.handleChangeEditState,className:"user_page_email"},t.email,r.a.createElement("span",{className:"edit_email_icon"})))),r.a.createElement("div",{className:"user_tasks_wrapper"},r.a.createElement("h2",{className:"user_tasks_header"},"My Tasks"),r.a.createElement("div",null,a.map((function(e){var t=e.task;return r.a.createElement(o.b,{key:t.id,to:"/project-board/".concat(t.project)},r.a.createElement("div",{key:t.id,className:"task_container"},r.a.createElement("div",{className:"task_colour",style:{background:"#6ECAB5"}}),r.a.createElement("div",{className:"task_content_container"},r.a.createElement("p",{className:"task_text no_click"},t.text),t.columns.map((function(e){return r.a.createElement("div",{key:e.id,className:"task_column_outer no_click task_column_".concat(e.col_type," task_column_").concat(e[e.col_type])},r.a.createElement("div",{className:"task_column"},"users"===e.col_type&&r.a.createElement("div",{className:"user_column_image user_column_padding"}),"numbers"===e.col_type&&e[e.col_type],"text"===e.col_type&&e[e.col_type],"priority"===e.col_type&&e[e.col_type],"status"===e.col_type&&e[e.col_type],"date"===e.col_type&&e[e.col_type],"file"===e.col_type&&e[e.col_type]&&r.a.createElement("div",{className:"column_file_iconpointer_evencolumn_file_".concat(e[e.col_type].split(".").pop())})))})))))}))))))}}]),t}(r.a.Component),X=function(){return r.a.createElement("section",{className:"project_main"},r.a.createElement("div",null,r.a.createElement("div",null,"Not Found")))},Y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:null,new:!1,project:null,burgerSwitch:!1},a.handleNewProject=function(){a.setState({new:!0})},a.getUserData=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(w.getToken())}});case 2:t=e.sent,n=t.data,a.setState({data:n});case 5:case"end":return e.stop()}}),e)}))),a.burgerSwitch=function(){a.setState({burgerSwitch:!a.state.burgerSwitch})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this;if(!this.state.data)return null;var t=this.state.data.collab_projects;return r.a.createElement("section",{className:"project_page_wrapper"},r.a.createElement("div",{className:"navbar_wrapper"},r.a.createElement(x,{image:this.state.data.image,burgerSwitch:this.burgerSwitch})),r.a.createElement("div",{className:"main_content_wrapper"},r.a.createElement("div",{className:"sidebar_wrapper ".concat(this.state.burgerSwitch&&"burger_extended")},r.a.createElement(A,{projects:t,handleNewProject:this.handleNewProject})),r.a.createElement("div",{className:"project_main_wrapper"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/project-board/notfound",component:X}),r.a.createElement(l.b,{path:"/project-board/new",render:function(t){return r.a.createElement(H,Object.assign({},t,{getUserData:e.getUserData,userId:e.state.data.id}))}}),r.a.createElement(l.b,{path:"/project-board/user",render:function(t){return r.a.createElement(W,Object.assign({},t,{getUserData:e.getUserData,user:e.state.data}))}}),r.a.createElement(l.b,{path:"/project-board/:id",render:function(t){return r.a.createElement(J,Object.assign({},t,{getUserData:e.getUserData,userId:e.state.data.id,user:e.state.data}))}})))))}}]),t}(r.a.Component),Q=a(20),V=function(e){var t=e.component,a=Object(Q.a)(e,["component"]);return w.isAuthenticated()?r.a.createElement(l.b,Object.assign({component:t},a)):(w.logout(),r.a.createElement(l.a,{to:"/"}))},Z=function(e){var t=e.component,a=Object(Q.a)(e,["component"]);return w.isAuthenticated()?r.a.createElement(l.a,{to:"/project-board/user"}):r.a.createElement(l.b,Object.assign({component:t},a))};var $=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(l.d,null,r.a.createElement(Z,{exact:!0,path:"/",component:C}),r.a.createElement(V,{path:"/project-board",component:Y}),r.a.createElement(l.b,{path:"/*",component:X}))))};c.a.render(r.a.createElement($,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.881fb01a.chunk.js.map